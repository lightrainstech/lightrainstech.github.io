<!doctype html>
<html amp lang="en">
<head>
  <meta charset="utf-8">
  <title>Lightning Network - What and Why</title>
  <link rel="canonical" href="https://lightrains.com/blogs/lightning-networks-what-and-why" />
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <style amp-custom="">
    body {
        padding: 10px;
        animation: amp-timeout 0x 5s 1 normal forwards;
        padding-top: 30px;
        background-color: #f4f4f2;
        color: #333332;
        font-size: 18px;
        font-style: normal;
        font-weight: 400;
        letter-spacing: -0.02em;
        line-height: 1.4;
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        font-family: 'Monaco', Courier;
    }
    .h1 {
        font-size: 20px;
    }
    .ui.highlight {
        font-size: 18pt;
        border-left: 3px solid #a7bd0d;
        padding: 15px;
        margin: 20px 5px;
        font-style: italic;
        background: #fbfbfb;
        color: #21ba45;
    }
    p {
        color: #333;
        line-height: 26px;
        display: block;
    }
    @keyframes amp-timeout {
        0% {
            opacity: 0;
        }
        100% {
            opacity: 1;
        }
    }
    a {
        color: #1678c2;
        background: transparent;
        color: #666666;
        display: inline;
        text-decoration: underline;
    }
    .related.ui.segment {
        border-top: 5px solid #202020;
        background: rgba(48, 54, 4, 0.12);
        padding: 5px;
    }
    .related.ui.segment h3 {
        margin-top: 0;
    }
    .ampmenu a {
        display: inline-block;
        margin: 0 10px 0 0;
        color: #303030;
        letter-spacing: 1px;
        text-decoration: none;
    }
    amp-img {
        background-color: gray;
    }
    .ampmenu {
        background: rgba(255, 255, 255, 0.95);
        width: 98%;
        position: fixed;
        left: 0;
        top: 0;
        padding: 10px;
        border-bottom: 1px solid #e6e6e6;
        z-index: 99;
    }
    html {
        font-family: sans-serif;
        -ms-text-size-adjust: 100%;
        -webkit-text-size-adjust: 100%;
    }
    body hr {
        border: 0;
        border-top: 1px solid #b3b3b3;
        display: block;
        margin: 50px auto 40px auto;
        width: 20%;
    }
    body a:focus,
    body a:hover {
        color: #ff4136;
    }
    .post-title {
        font-size: 35px;
        letter-spacing: -0.02em;
        letter-spacing: -0.04em;
        line-height: 1.1;
        margin-bottom: 8px;
        text-align: center;
    }

    .content {
        display: block;
        font-size: 18px;
        font-style: normal;
        letter-spacing: 0.05px;
        line-height: 1.5;
        margin: 0 auto;
        max-width: 98%;
    }
    .timespan {
        font-size: 15px;
        clear: both;
        opacity: 0.7;
    }
    a.nonamp {
        text-align: center;
        display: block;
        margin: 10px;
    }
    ul,
    ol {
        list-style: none;
        margin-left: 8px;
        padding-left: 1em;
        text-indent: -1em;
    }
    li {
        margin: 6px 0;
    }
    li:before {
        content: '\0BB \020';
    }
    pre,
    code {
        background: #333;
        color: #fff;
        padding: 3px;
        border-radius: 2px;
        -o-border-radius: 2px;
        -moz-border-radius: 2px;
    }
    .cta-blog {
        display: none;
        visible: hidden;
        width: 0;
        height: 0;
    }
</style>
<style amp-boilerplate>
    body {
        -webkit-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        -moz-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        -ms-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        animation: -amp-start 8s steps(1, end) 0s 1 normal both;
    }
    @-webkit-keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }
    @-moz-keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }
    @-ms-keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }
    @-o-keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }
    @keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }</style
><noscript
    ><style amp-boilerplate>
        body {
            -webkit-animation: none;
            -moz-animation: none;
            -ms-animation: none;
            animation: none;
        }
    </style></noscript
>

  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "Lightrains Technolabs",
        "legalName": "Lightrains Technolabs Private Limited",
        "url": "https://lightrains.com",
        "telephone": "+914714000056",
        "email": "hello(at)lightrains.com",
        "foundingDate": "2012-12-28",
        "slogan": "Technology Supercharged",
        "description": "A global technology solution provider enabling enterprises to apply Blockchain and AI in their businesses.",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Trivandrum",
            "addressRegion": "Kerala",
            "postalCode": "695581",
            "streetAddress": "Module 2, Gayathri, Technopark Campus, Trivandrum, 695581"
        },
        "founder": {
            "@context": "http://schema.org/",
            "@type": "Person",
            "name": "Nikhil Mohan",
            "jobTitle": "Director of Technology",
            "url": "https://nikhilmohan.in/",
            "sameAs": ["https://twitter.com/niksmac_", "https://github.com/niksmac"]
        },
        "logo": "https://lightrains.com/assets/img/lightrains-logo.png",
        "sameAs": ["https://twitter.com/lightrainstech","https://medium.com/lightrains","https://www.facebook.com/lightrainstechnolabs","http://www.linkedin.com/company/1322794","https://github.com/lightrainstech"]
    }
</script>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "mainEntityOfPage":{
    "@type":"WebPage",
    "@id":"https://lightrains.com/blogs/lightning-networks-what-and-why/"
  },
  "headline": "Lightning Network - What and Why",
  "about": "Blockchain Consulting.",
  "sameAs": "https://lightrains.com/blogs/lightning-networks-what-and-why/",
  "image": {
    "@type": "ImageObject",
    "url": "https://lightrains.com/assets/img/blog/lightning-networks-what-and-why.png",
    "height": 1000,
    "width": 700
  },
  "datePublished": "2018-02-23T05:30:00+05:30",
  "dateModified": "2018-02-23T05:30:00+05:30",
  "author": {
     "@type": "Person",
     "name": "Nikhil Mohan"
   },
  "publisher": {
    "@type": "Organization",
    "name": "Lightrains Technolabs",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lightrains.com/assets/img/lightrains-logo.png",
      "width": 192,
      "height": 60
    }
  },
  "description": "The problem with bitcoin blockchain network is scalability. The block size in a blockchain is limited to `1MB`, every block is created in every `10 Min` and ..."
}
</script>

</head>
<body>
  
  <div class="ampmenu">
  <a href="/">Home</a>
  <a href="/amp">Blog</a>
  <a href="/about/lightrains" >About</a>
  <a href="/about/contact">Contact</a>
</div>

  <h1 class="post-title ui header huge" itemprop="name headline" title="Lightning Network - What and Why">Lightning Network - What and Why</h1>

  <amp-img
  src="/assets/img/blog/lightning-networks-what-and-why.png"
  alt="Lightning Network - What and Why" height="216" width="360" on="tap:headline-img-lightbox"
  layout="responsive" role="img" tabindex="0"
  ></amp-img>

  <div class="content">
    <span class="timespan">
      Fri, Feb 23, 18
    </span>
    <p>The problem with bitcoin blockchain network is scalability. The block size in a blockchain is limited to <code class="language-plaintext highlighter-rouge">1MB</code>, every block is created in every <code class="language-plaintext highlighter-rouge">10 Min</code> and only <code class="language-plaintext highlighter-rouge">7 transaction per second</code>. Lightning network introduced to resolve this problem, there by allowing more transaction at a time.</p>

<p>Lightning network(LN) can be defined as decentralised network or payment channel for instant payment which is based on block chain’s smart contract functionality. More specifically Lightning Network is an <code class="language-plaintext highlighter-rouge">off-chain protocol</code> for bitcoin <code class="language-plaintext highlighter-rouge">micro payments</code>.</p>

<p>LN is a bidirectional payment channel which allows transaction between two parties without needing broadcast each and every transaction.</p>

<h2 id="how-lightning-network-works">How Lightning Network works</h2>

<h3 id="bidirectional-payment-channel">Bidirectional payment channel</h3>

<ul>
  <li>A multi-signature wallet/ address is opened by both parties and a small amount is deposited by them from their personal address. This transaction is called funding transaction/opening transaction since it for fund and open a bidirectional channel.</li>
  <li>One <code class="language-plaintext highlighter-rouge">on­-chain</code> transaction is made to deposit the funds. Before this transaction is made, a refund transaction is created, which returns the original deposit to both parties. After the transaction is broadcast on­-chain, the <code class="language-plaintext highlighter-rouge">payment channel</code> is open and ready for transfers.</li>
</ul>

<blockquote>
  <p>Initially this funding is taken as input for the transaction.</p>
</blockquote>

<ul>
  <li>Let Alice and Bob are the two parties who opened the payment channel with funding of 10 BTC (5 BTC each). Additionally, Alice and Bob both create a secret (a string of numbers), and exchange the hash. Suppose Alice want to send 1 BTC to Bob then, Alice now immediately creates a subsequent transaction from the opening transaction called commitment transaction. With the commitment transaction, Alice sends four bitcoins to herself, and six bitcoins to a second multi-sig address. This address can be unlocked by Bob only <code class="language-plaintext highlighter-rouge">after 1000 blocks</code> and unlocked by Alice only if she knows the pre-image of the hash given by Bob. Alice signs the commitment transaction and give to Bob.</li>
  <li>Bob also creates the commitment transaction which is mirrored one of Alice. In this commitment transaction Bob sends 6 BTC to himself and 4 BTC to a second multi-sig address. This address is unlocked by Alice only after 1000 blocks and unlocked by Bob if he knows pre-image of hash given by Alice. Bob signs the transaction and gives to Alice.</li>
</ul>

<blockquote>
  <p>At this stage either Bob or Alice can sign half-valid transaction and publish on blockchain. But who ever publishing will have to wait 1000 blocks to unlock the multi-sig address.This is the key trick of a payment channel: neither sign and broadcast their half of the transaction at all.</p>
</blockquote>

<ul>
  <li>Suppose after some times Bob want to send 1BTC back to Alice. Bob repeats the same steps above mentioned but except that they require new secret keys.
At this stage both Alice and Bob can exchange previous secret that used in first setup .</li>
  <li>At this point, again, both Alice and Bob could sign and broadcast the new “half valid” commitment transaction they just got.</li>
</ul>

<blockquote>
  <p>Bob cannot safely sign and broadcast the older commitment transaction any more, because Alice now knows Bob’s first secret. If Bob were to sign and broadcast that commitment transaction, he would immediately send four bitcoins to Alice… and he would have to wait 1000 blocks to claim his own six bitcoins. That’s a problem, because now that Alice knows his secret, she could and claim the other six bitcoins as well!. The same way Alice cannot broadcast the older commitment transaction.</p>
</blockquote>

<h3 id="paying-to-third-party">Paying to third party</h3>

<ul>
  <li>When Alice want to pay carol and don’t want to open a new channel with carol since opening a new channel need funding. Consider that both Alice and carol has a payment channel with Bob, then Alice can pay carol via Bob.</li>
  <li>Alice wants to ensure that she only pays Bob one bitcoin, if he also pays Carol one bitcoin. Because Alice cannot trust either Bob or Carol.</li>
  <li>Carol generates a random string and send the hash to Alice.</li>
  <li>Alice tells Bob that she will pay 1 BTC if Bob gives the pre-image of the hash within a particular time t.</li>
  <li>Then Bob tells Carol that He will pay 1 BTC if Carol gives the pre-image of the hash(which only Carol has) within a time t-n</li>
  <li>Bob turns to Carol, and gives Carol one bitcoin in return for the value.</li>
  <li>Then, Bob turns back to Alice with the value. Alice knows Bob must have gotten the value from Carol in exchange for a bitcoin, and therefore concludes Carol got her bitcoin. So Alice can confidently give Bob a bitcoin.</li>
</ul>

<blockquote>
  <p>if Bob gives a bitcoin to Carol, he must be guaranteed to get a bitcoin back from Alice.Bob has to trust Carol to really give him the value after he sent her a bitcoin.That’s where <a href="https://en.bitcoin.it/wiki/Hashed_Timelock_Contracts">Hash Time-Locked Contracts</a> (HTLCs) come in.</p>
</blockquote>

<ul>
  <li>Instead of sending Bob a bitcoin, Alice sends a bitcoin to a new multi-sig address that can be unlocked by Bob only if he provides his signature and pre-image of the hash. And if Bob doesn’t provide the value in time, after a specified time, Alice get her bitcoin back. Not only Alice and Bob, but also Bob and Carol established an HTLC.</li>
</ul>

<blockquote>
  <p>if Bob gives a bitcoin to Carol, he must be guaranteed to get a bitcoin back from Alice.Bob has to trust Carol to really give him the value after he sent her a bitcoin.That’s where Hash Time-Locked Contracts (HTLCs) come in.</p>
</blockquote>

    <a href="https://lightrains.com/blogs/lightning-networks-what-and-why" title="Lightning Network - What and Why" class="nonamp">Full Version of Lightning Network - What and Why</a>
  </div>
  
  <div class="related ui segment">
    <h3>Related Posts</h3>
    <ul class="ui list">
      
      
      <li><a href="/amp/blogs/dns-over-https-doh/index.html" title="DNS over HTTPS">DNS over HTTPS</a></li>
      
      <li><a href="/amp/blogs/automated-api-testing-nodejs/index.html" title="Automated API testing with nodejs">Automated API testing with nodejs</a></li>
      
      <li><a href="/amp/blogs/google-widewine-drm-introduction/index.html" title="Widevine - DRM for the new web">Widevine - DRM for the new web</a></li>
      
      <li><a href="/amp/blogs/what-is-ethereum-istanbul-upgrade/index.html" title="Changes to watch in Ethereum istanbul">Changes to watch in Ethereum istanbul</a></li>
      
    </ul>
    <p class="slogan">Lightrains Technolabs | Blockchain Consulting. Technology Supercharged</p>
  </div>
</body>
</html>
