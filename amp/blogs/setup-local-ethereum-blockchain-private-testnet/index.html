<!doctype html>
<html amp lang="en">
<head>
  <meta charset="utf-8">
  <title>How to setup a local test Ethereum Blockchain</title>
  <link rel="canonical" href="https://lightrains.com/blogs/setup-local-ethereum-blockchain-private-testnet" />
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <style amp-custom="">
    body {
        padding: 10px;
        animation: amp-timeout 0x 5s 1 normal forwards;
        padding-top: 30px;
        background-color: #f4f4f2;
        color: #333332;
        font-size: 18px;
        font-style: normal;
        font-weight: 400;
        letter-spacing: -0.02em;
        line-height: 1.4;
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        font-family: 'Monaco', Courier;
    }
    .h1 {
        font-size: 20px;
    }
    .ui.highlight {
        font-size: 18pt;
        border-left: 3px solid #a7bd0d;
        padding: 15px;
        margin: 20px 5px;
        font-style: italic;
        background: #fbfbfb;
        color: #21ba45;
    }
    p {
        color: #333;
        line-height: 26px;
        display: block;
    }
    @keyframes amp-timeout {
        0% {
            opacity: 0;
        }
        100% {
            opacity: 1;
        }
    }
    a {
        color: #1678c2;
        background: transparent;
        color: #666666;
        display: inline;
        text-decoration: underline;
    }
    .related.ui.segment {
        border-top: 5px solid #202020;
        background: rgba(48, 54, 4, 0.12);
        padding: 5px;
    }
    .related.ui.segment h3 {
        margin-top: 0;
    }
    .ampmenu a {
        display: inline-block;
        margin: 0 10px 0 0;
        color: #303030;
        letter-spacing: 1px;
        text-decoration: none;
    }
    amp-img {
        background-color: gray;
    }
    .ampmenu {
        background: rgba(255, 255, 255, 0.95);
        width: 98%;
        position: fixed;
        left: 0;
        top: 0;
        padding: 10px;
        border-bottom: 1px solid #e6e6e6;
        z-index: 99;
    }
    html {
        font-family: sans-serif;
        -ms-text-size-adjust: 100%;
        -webkit-text-size-adjust: 100%;
    }
    body hr {
        border: 0;
        border-top: 1px solid #b3b3b3;
        display: block;
        margin: 50px auto 40px auto;
        width: 20%;
    }
    body a:focus,
    body a:hover {
        color: #ff4136;
    }
    .post-title {
        font-size: 35px;
        letter-spacing: -0.02em;
        letter-spacing: -0.04em;
        line-height: 1.1;
        margin-bottom: 8px;
        text-align: center;
    }

    .content {
        display: block;
        font-size: 18px;
        font-style: normal;
        letter-spacing: 0.05px;
        line-height: 1.5;
        margin: 0 auto;
        max-width: 98%;
    }
    .timespan {
        font-size: 15px;
        clear: both;
        opacity: 0.7;
    }
    a.nonamp {
        text-align: center;
        display: block;
        margin: 10px;
    }
    ul,
    ol {
        list-style: none;
        margin-left: 8px;
        padding-left: 1em;
        text-indent: -1em;
    }
    li {
        margin: 6px 0;
    }
    li:before {
        content: '\0BB \020';
    }
    pre,
    code {
        background: #333;
        color: #fff;
        padding: 3px;
        border-radius: 2px;
        -o-border-radius: 2px;
        -moz-border-radius: 2px;
    }
    .cta-blog {
        display: none;
        visible: hidden;
        width: 0;
        height: 0;
    }
</style>
<style amp-boilerplate>
    body {
        -webkit-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        -moz-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        -ms-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        animation: -amp-start 8s steps(1, end) 0s 1 normal both;
    }
    @-webkit-keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }
    @-moz-keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }
    @-ms-keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }
    @-o-keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }
    @keyframes -amp-start {
        from {
            visibility: hidden;
        }
        to {
            visibility: visible;
        }
    }</style
><noscript
    ><style amp-boilerplate>
        body {
            -webkit-animation: none;
            -moz-animation: none;
            -ms-animation: none;
            animation: none;
        }
    </style></noscript
>

  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "Lightrains Technolabs",
        "legalName": "Lightrains Technolabs Private Limited",
        "url": "https://lightrains.com",
        "telephone": "+914714000056",
        "email": "hello(at)lightrains.com",
        "foundingDate": "2012-12-28",
        "slogan": "Technology Supercharged",
        "description": "A global technology solution provider enabling enterprises to apply Blockchain and AI in their businesses.",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Trivandrum",
            "addressRegion": "Kerala",
            "postalCode": "695581",
            "streetAddress": "Module 2, Gayathri, Technopark Campus, Trivandrum, 695581"
        },
        "founder": {
            "@context": "http://schema.org/",
            "@type": "Person",
            "name": "Nikhil Mohan",
            "jobTitle": "Director of Technology",
            "url": "https://nikhilmohan.in/",
            "sameAs": ["https://twitter.com/niksmac_", "https://github.com/niksmac"]
        },
        "logo": "https://lightrains.com/assets/img/lightrains-logo.png",
        "sameAs": ["https://twitter.com/lightrainstech","https://medium.com/lightrains","https://www.facebook.com/lightrainstechnolabs","http://www.linkedin.com/company/1322794","https://github.com/lightrainstech"]
    }
</script>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "mainEntityOfPage":{
    "@type":"WebPage",
    "@id":"https://lightrains.com/blogs/setup-local-ethereum-blockchain-private-testnet/"
  },
  "headline": "How to setup a local test Ethereum Blockchain",
  "about": "Blockchain Consulting.",
  "sameAs": "https://lightrains.com/blogs/setup-local-ethereum-blockchain-private-testnet/",
  "image": {
    "@type": "ImageObject",
    "url": "https://lightrains.com/assets/img/blog/Ethereum-homestead-background-27.jpg",
    "height": 1000,
    "width": 700
  },
  "datePublished": "2016-06-13T11:19:48+05:30",
  "dateModified": "2016-06-13T11:19:48+05:30",
  "author": {
     "@type": "Person",
     "name": "Nikhil Mohan"
   },
  "publisher": {
    "@type": "Organization",
    "name": "Lightrains Technolabs",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lightrains.com/assets/img/lightrains-logo.png",
      "width": 192,
      "height": 60
    }
  },
  "description": "Setting up a private chain is useful for testing purposes or simply for playing around with, I couldn’t find a good tutorial on it so I thought I would write..."
}
</script>

</head>
<body>
  
  <div class="ampmenu">
  <a href="/">Home</a>
  <a href="/amp">Blog</a>
  <a href="/about/lightrains" >About</a>
  <a href="/about/contact">Contact</a>
</div>

  <h1 class="post-title ui header huge" itemprop="name headline" title="How to setup a local test Ethereum Blockchain">How to setup a local test Ethereum Blockchain</h1>

  <amp-img
  src="/assets/img/blog/Ethereum-homestead-background-27.jpg"
  alt="How to setup a local test Ethereum Blockchain" height="216" width="360" on="tap:headline-img-lightbox"
  layout="responsive" role="img" tabindex="0"
  ></amp-img>

  <div class="content">
    <span class="timespan">
      Mon, Jun 13, 16
    </span>
    <p>Setting up a private chain is useful for testing purposes or simply for playing around with, I couldn’t find a good tutorial on it so I thought I would write my own. In this tutorial we are working on Ubuntu 14.04 LTS and Go Implementation of Ethereum go-ethereum or simply geth</p>

<p><strong>Prerequisites</strong></p>

<ul>
  <li><a href="https://github.com/ethereum/go-ethereum/wiki">geth</a></li>
  <li><a href="http://releases.ubuntu.com/14.04/">ubuntu 14.04</a></li>
</ul>

<h2 id="the-fist-block---genesis-block">The Fist Block - Genesis Block</h2>

<p>The Genesis block is the start block of the Blockchain - the first block, block 0, the only block that does not point to a predecessor block. It’s the entry point into the Blockchain database. The Genesis data defines initial parameters of the database and defines a cryptographically valid entry block. You might think thats a flaw in the system being able to decide the starting conditions of the chain, but the consensus algorithm will ensure that no other node will agree with your version of the blockchain unless they have the same genesis block (and some other crucial parameters, discussed later).</p>

<h3 id="how-to-create-genesis-block">How to Create Genesis Block</h3>

<p>Great, so how do we make one of these genesis blocks? Well its fairly simple the following JSON is all you really need:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "nonce": "0x0000000000000042",
    "mixhash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "difficulty": "0x4000",
    "alloc": {},
    "coinbase": "0x0000000000000000000000000000000000000000",
    "timestamp": "0x00",
    "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "extraData": "Custem Ethereum Genesis Block",
    "gasLimit": "0xffffffff"
}
</code></pre></div></div>

<p>Save the JSON into a file lets call it genesis.json and save in your home directory.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ geth --genesis &lt;genesis json file path&gt; --datadir &lt;some path to an empty folder&gt; --networkid 123 --nodiscover --maxpeers 0 console
</code></pre></div></div>

<p><strong>This command does a few things:</strong></p>

<p>It utilises the genesis block json to seed the blockchain It uses the datadir to store all state necessary to maintain the newly created blockchain and other data (declared to prevent you clobbering your main net data, wouldn’t want to overwrite all those blocks you spent time downloading!) Use a network id other than ‘1’ to ensure we can’t talk to nodes from the main network – “connections between nodes are valid only if peers have identical protocol version and network id” Disable peer discovery Disable network by setting maxpeers to 0 Starts geth in console mode so you can interact with your new blockchain / node
Note the difficulty is set very low in the above genesis block, this allowed my local machine to mine blocks in 100’s of milliseconds, that will make it very easy for you to gain ether.</p>

<h2 id="pre-seeding-accounts-with-allocation---local-eth">Pre-seeding accounts with allocation - Local ETH</h2>

<p>In the geth console enter</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>personal.newAccount("mypassword"); 0xcc8C048426978c5877212281b8a75F1B4E71a862
</code></pre></div></div>

<p>The last command above generated a new account with address ‘0xcc8C048426978c5877212281b8a75F1B4E71a862’
Once you’ve generated your account, quit geth with ctrl-c and remove every folder except keystore/ from your datadir:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd &lt;your datadir&gt;
$ rm -rf `ls | grep -v keystore`
</code></pre></div></div>

<p>update your genesis block json, adding the following to the alloc key:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"alloc": {
  "&lt;your account address e.g. 0xcc8C048426978c5877212281b8a75F1B4E71a862&gt;": {
    "balance": "10000000000000000000"
  }
}
</code></pre></div></div>

<p>Now re-run the geth command using the newly updated genesis json file and the same datadir, when you check your account balance you will find you now have 10 ether:</p>

<p><strong>Verify 10 ether:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ primary = eth.accounts[0];
'0xcc8C048426978c5877212281b8a75F1B4E71a862'
$ balance = web3.fromWei(eth.getBalance(primary), "ether");
'10'
</code></pre></div></div>

<h2 id="using-the-local-blockchain">Using the local Blockchain</h2>

<p>Once the local Blockchain is ready, it can be employed using the classic Ethereum client applications.</p>

<p>As long as you have the main geth process handling the local Blockchain, running under the same user ID, a simple geth attach works. (Note: I didn’t verify this in the code or the documentation on UNIX IPC. I found this out by testing).
When starting to use the local test network from different workstations, it is indispensable to specify the –networkid 1100. The usage of the Ethereum discovery protocol should be fine on LANs without additional “hops”, but it is also possible to explicitly specify the peer-to-peer “bootstrap” node via –bootnodes and to deactivate the node discovery mode with –nodiscover.
Mine the local Blockchain</p>

<p>When working with the local Blockchain, we need the run a Miner in order to have our transactions executed and included in the Blockchain. At the same time, we get some free test-ether that we can play with. Note that it makes no sense to keep the miner running when the test network is not used, and it makes no sense neither to use other resources than the CPU for mining. With a Difficulty configured as low as in our custom Genesis block, the miner will find a valid block during each operation.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>geth --mine -rpccorsdomain "*" --ipcapi "admin,eth,miner" --rpcapi "eth,web3" --networkid 1100 -maxpeers 5 --minerthreads 1
</code></pre></div></div>

<p>{% include cta-blog.html %}</p>

    <a href="https://lightrains.com/blogs/setup-local-ethereum-blockchain-private-testnet" title="How to setup a local test Ethereum Blockchain" class="nonamp">Full Version of How to setup a local test Ethereum Blockchain</a>
  </div>
  
  <div class="related ui segment">
    <h3>Related Posts</h3>
    <ul class="ui list">
      
      
      <li><a href="/amp/blogs/nft-standards-erc-721-erc-1155/index.html" title="Various NFT Standards">Various NFT Standards</a></li>
      
      <li><a href="/amp/blogs/what-is-nft-non-fungible-tokens/index.html" title="What is an NFT aka Non Fungible Tokens">What is an NFT aka Non Fungible Tokens</a></li>
      
      <li><a href="/amp/blogs/mongodb-solutions-to-data-growth/index.html" title="MongoDB Solutions to data growth">MongoDB Solutions to data growth</a></li>
      
      <li><a href="/amp/blogs/formsure-alternative-google-forms/index.html" title="Why we moved to Formsure from Google Forms">Why we moved to Formsure from Google Forms</a></li>
      
    </ul>
    <p class="slogan">Lightrains Technolabs | Blockchain Consulting. Technology Supercharged</p>
  </div>
</body>
</html>
