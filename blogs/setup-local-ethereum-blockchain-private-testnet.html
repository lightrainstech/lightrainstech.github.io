<!DOCTYPE html><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>How to setup a local test Ethereum Blockchain ⚡️ Lightrains Technolabs Pvt Ltd</title><meta name="description" content="Setting up a private chain is useful for testing purposes or simply for playing around with, I couldn’t find a good tutorial on it so I thought I would write..."><link href="/assets/css/semantic.min.css" rel="stylesheet"><link href="/assets/css/main.css" rel="stylesheet"><link rel="canonical" href="http://lightrains.com/blogs/setup-local-ethereum-blockchain-private-testnet"><link rel="alternate" type="application/rss+xml" title="Lightrains Technolabs Pvt Ltd" href="http://lightrains.com/feed.xml"><link rel="icon" type="image/png" sizes="192x192" href="/assets/favicons/android-chrome-192x192.png"><link rel="manifest" href="/assets/favicons/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#FFFFFF"><meta name="application-name" content="Lightrains Tech"><link rel="apple-touch-icon" sizes="57x57" href="/assets/favicons/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/favicons/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/favicons/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/favicons/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/favicons/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/favicons/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/favicons/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/favicons/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon-180x180.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Lightrains Tech"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="230x230" href="/assets/favicons/favicon-230x230.png"><link rel="shortcut icon" href="/assets/favicons/favicon.ico"><meta property="twitter:image" content="http://lightrains.com/assets/favicons/twitter.png"><meta property="og:image" content="http://lightrains.com/assets/favicons/open-graph.png"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" href="/assets/favicons/apple-touch-startup-image-320x460.png"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" href="/assets/favicons/apple-touch-startup-image-640x920.png"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="/assets/favicons/apple-touch-startup-image-640x1096.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="/assets/favicons/apple-touch-startup-image-750x1294.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)" href="/assets/favicons/apple-touch-startup-image-1182x2208.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)" href="/assets/favicons/apple-touch-startup-image-1242x2148.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" href="/assets/favicons/apple-touch-startup-image-748x1024.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" href="/assets/favicons/apple-touch-startup-image-768x1004.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="/assets/favicons/apple-touch-startup-image-1496x2048.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="/assets/favicons/apple-touch-startup-image-1536x2008.png"><body class="page page-blog"><div class="ui container"><header class="site-header"><div class="ui secondary pointing menu"><div class="left menu"> <a href="/"><img src="/assets/img/logo-1.svg" width="100" alt="" data-content="Lightrains Technolabs Pvt Ltd - Technology Supercharged" data-variation="inverted very wide" data-position="right center" alt="Lightrains Technolabs Pvt Ltd - Technology Supercharged" ></a></div><div class="right menu" id="menu"> <a class="item" href="/about/lightrains">About Us</a><div class="ui dropdown item"> Company<i class="dropdown icon"></i><div class="menu"> <a class="item" href="/about/careers">Careers</a> <a class="item" href="/about/team">Team</a> <a class="item" href="/about/technology">Technology</a><div class="ui dropdown item"> Consulting<i class="dropdown icon"></i><div class="menu"> <a class="item" href="/consulting/blockchain-consulting">Blockchain</a> <a class="item" href="/consulting/drupal-consulting-development">Drupal</a> <a class="item" href="/consulting/es6-javascript-development">ES6</a></div></div></div></div><a class="item" href="/about/portfolio">Work</a> <a class="item" href="/blogs">Blog</a> <a class="item" href="/about/contact">Contact</a></div></div></header></div><div class="ui container"><header class="post-header"><h1 class="post-title">How to setup a local test Ethereum Blockchain</h1></header><div class="ui grid stackable"><div class="ui eleven wide column text page-text"><h2 class="post-subtitle" itemprop="name headline">How to Setup a Local Test Ethereum Blockchain aka Private Testnet</h2><img class="ui fluid image" src="/assets/img/blog/Ethereum-homestead-background-27.jpg" alt="How to setup a local test Ethereum Blockchain"><div class="ui hidden divider"></div><div class="author"> by <a href="http://nikhilmohan.in" target="_blank">Nikhil Mohan</a> posted on <span>Mon, Jun 13, 2016</span> in <a href="/tag/"></a></div><div class="ui hidden divider"></div><p>Setting up a private chain is useful for testing purposes or simply for playing around with, I couldn’t find a good tutorial on it so I thought I would write my own. In this tutorial we are working on Ubuntu 14.04 LTS and Go Implementation of Ethereum go-ethereum or simply geth<p><strong>Prerequisites</strong><ul><li><a href="https://github.com/ethereum/go-ethereum/wiki">geth</a><li><a href="http://releases.ubuntu.com/14.04/">ubuntu 14.04</a></ul><h2 id="the-fist-block---genesis-block">The Fist Block - Genesis Block</h2><p>The Genesis block is the start block of the Blockchain - the first block, block 0, the only block that does not point to a predecessor block. It’s the entry point into the Blockchain database. The Genesis data defines initial parameters of the database and defines a cryptographically valid entry block. You might think thats a flaw in the system being able to decide the starting conditions of the chain, but the consensus algorithm will ensure that no other node will agree with your version of the blockchain unless they have the same genesis block (and some other crucial parameters, discussed later).<h3 id="how-to-create-genesis-block">How to Create Genesis Block</h3><p>Great, so how do we make one of these genesis blocks? Well its fairly simple the following JSON is all you really need:<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000042"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"mixhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"difficulty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alloc"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nt">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"parentHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"extraData"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Custem Ethereum Genesis Block"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"gasLimit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xffffffff"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>Save the JSON into a file lets call it genesis.json and save in your home directory.<div class="highlighter-rouge"><pre class="highlight"><code>$ geth --genesis &lt;genesis json file path&gt; --datadir &lt;some path to an empty folder&gt; --networkid 123 --nodiscover --maxpeers 0 console
</code></pre></div><p><strong>This command does a few things:</strong><p>It utilises the genesis block json to seed the blockchain It uses the datadir to store all state necessary to maintain the newly created blockchain and other data (declared to prevent you clobbering your main net data, wouldn’t want to overwrite all those blocks you spent time downloading!) Use a network id other than ‘1’ to ensure we can’t talk to nodes from the main network – “connections between nodes are valid only if peers have identical protocol version and network id” Disable peer discovery Disable network by setting maxpeers to 0 Starts geth in console mode so you can interact with your new blockchain / node Note the difficulty is set very low in the above genesis block, this allowed my local machine to mine blocks in 100’s of milliseconds, that will make it very easy for you to gain ether.<h2 id="pre-seeding-accounts-with-allocation---local-eth">Pre-seeding accounts with allocation - Local ETH</h2><p>In the geth console enter<div class="highlighter-rouge"><pre class="highlight"><code>personal.newAccount("mypassword"); 0xcc8C048426978c5877212281b8a75F1B4E71a862
</code></pre></div><p>The last command above generated a new account with address ‘0xcc8C048426978c5877212281b8a75F1B4E71a862’ Once you’ve generated your account, quit geth with <ctrl-c> and remove every folder except keystore/ from your datadir:</ctrl-c><div class="highlighter-rouge"><pre class="highlight"><code>$ cd &lt;your datadir&gt;
$ rm -rf `ls | grep -v keystore`
</code></pre></div><p>update your genesis block json, adding the following to the alloc key:<div class="highlighter-rouge"><pre class="highlight"><code>"alloc": {
    "&lt;your account address e.g. 0xcc8C048426978c5877212281b8a75F1B4E71a862&gt;": {
        "balance": "10000000000000000000"
    }
}
</code></pre></div><p>Now re-run the geth command using the newly updated genesis json file and the same datadir, when you check your account balance you will find you now have 10 ether:<p><strong>Verify 10 ether:</strong><div class="highlighter-rouge"><pre class="highlight"><code>$ primary = eth.accounts[0];
  '0xcc8C048426978c5877212281b8a75F1B4E71a862'
$ balance = web3.fromWei(eth.getBalance(primary), "ether");
  '10'
</code></pre></div><h2 id="using-the-local-blockchain">Using the local Blockchain</h2><p>Once the local Blockchain is ready, it can be employed using the classic Ethereum client applications.<p>As long as you have the main geth process handling the local Blockchain, running under the same user ID, a simple geth attach works. (Note: I didn’t verify this in the code or the documentation on UNIX IPC. I found this out by testing). When starting to use the local test network from different workstations, it is indispensable to specify the –networkid 1100. The usage of the Ethereum discovery protocol should be fine on LANs without additional “hops”, but it is also possible to explicitly specify the peer-to-peer “bootstrap” node via –bootnodes and to deactivate the node discovery mode with –nodiscover. Mine the local Blockchain<p>When working with the local Blockchain, we need the run a Miner in order to have our transactions executed and included in the Blockchain. At the same time, we get some free test-ether that we can play with. Note that it makes no sense to keep the miner running when the test network is not used, and it makes no sense neither to use other resources than the CPU for mining. With a Difficulty configured as low as in our custom Genesis block, the miner will find a valid block during each operation.<div class="highlighter-rouge"><pre class="highlight"><code>geth --mine -rpccorsdomain "*" --ipcapi "admin,eth,miner" --rpcapi "eth,web3" --networkid 1100 -maxpeers 5 --minerthreads 1
</code></pre></div><div class="ui hidden divider"></div><div class="ui tiny label"> All product names, logos, and brands are property of their respective owners. All company, product and service names used in this website are for identification purposes only. Use of these names, logos, and brands does not imply endorsement.</div><h4 class="ui horizontal divider header">Write a comment on How to setup a local test Ethereum Blockchain</h2><div id="disqus_thread"></div><script> (function() { // DON'T EDIT BELOW THIS LINE var d = document, s = d.createElement('script'); s.src = '//lightrainstechnolabs.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div><div class="ui five wide column"><div class="ui hidden divider"></div><h3>Posted In</h3><div class="ui black labels"> <a href="/tag/telegram/" class="ui label" title="Blogs Tagged Telegram" >Telegram<div class="detail">(1)</div></a> <a href="/tag/blockchain/" class="ui label" title="Blogs Tagged Blockchain" >Blockchain<div class="detail">(2)</div></a> <a href="/tag/bitcoin/" class="ui label" title="Blogs Tagged Bitcoin" >Bitcoin<div class="detail">(1)</div></a> <a href="/tag/smart-contract/" class="ui label" title="Blogs Tagged Smart Contract" >Smart Contract<div class="detail">(1)</div></a></div><h3>Recent Posts</h3><div class="ui relaxed list"><div class="item"> <a class="header" href="/blogs/compile-deploy-solidity-contract-ethereum-console-geth-part-1">Compile and Deploy Solidity Contract</a><div class="description">Mon, Jun 13, 2016</div></div><div class="item"> <a class="header" href="/blogs/setup-local-ethereum-blockchain-private-testnet">How to setup a local test Ethereum Blockchain</a><div class="description">Mon, Jun 13, 2016</div></div><div class="item"> <a class="header" href="/blogs/what-is-ethereum">What is Ethereum</a><div class="description">Mon, Jun 13, 2016</div></div><div class="item"> <a class="header" href="/blogs/what-is-bitcoin-currency">What is Bitcoin the currency</a><div class="description">Mon, Jun 13, 2016</div></div><div class="item"> <a class="header" href="/blogs/what-is-blockchain">What is Blockchain</a><div class="description">Mon, Jun 13, 2016</div></div></div><div class="ui items author white"><div class="item"> <a class="ui tiny image" href="http://nikhilmohan.in"> <img src="https://www.gravatar.com/avatar/ec562dd86a88f57838a3a57be91fcc2e"> </a><div class="content"> <a class="header" href="http://nikhilmohan.in" rel="author">Nikhil Mohan</a><div class="description"> Excepteur sint occaecat cupidatat non proident, sunt in culpa qui...</div><a href="https://in.linkedin.com/in/nikhilmohan7"><i class="linkedin icon"></i></a> <a href="http://github.com/niksmac"><i class="github icon"></i></a> <a href="http://twitter.com/niksmac_"><i class="twitter icon"></i></a></div></div></div></div></div></div><div class="ui container footer"><div class="ui hidden divider"></div><div class="ui hidden divider"></div><h4>Contact</h4><p> Lightrains Technolabs Pvt Ltd <br> Phone / +91 471 4000056 <br> Email / hello@lightrains.com <br> Studio / G3B, Thejaswini, Technopark Campus, Trivandrum, 695581</div><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-9728278-16', 'lightrains.com'); ga('send', 'pageview'); </script> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "Organization", "name" : "Lightrains Technolabs Pvt Ltd", "url" : "http://lightrains.com", "telephone": "+914714000056", "foundingDate": "2012-12-28", "address": { "@type": "PostalAddress", "addressLocality": "Trivandrum", "addressRegion": "Kerala", "postalCode": "695581", "streetAddress": "G3B, Thejaswini, Technopark Campus" }, "logo": "http://lightrains.com/lightrains-technolabs-pvt-ltd-logo.jpg", "sameAs" : [ "https://twitter.com/lightrainstech", "https://www.facebook.com/lightrainstechnolabs", "https://plus.google.com/108900746872278115127", "http://www.linkedin.com/company/1322794", "https://play.google.com/store/apps/developer?id=Lightrains+Technolabs+Pvt+Ltd&hl=en", "https://foursquare.com/v/5281ebdd11d2f33611f594db", "https://www.youtube.com/channel/UC7FbfmuIVkfGeYW2u6H_IfQ", "http://www.acquia.com/partners/showcase/lightrains-technolabs-pvt-ltd", "https://github.com/lightrainstech"] } </script> <script src="/assets/js/jquery.min.js"></script> <script src="/assets/js/semantic.min.js" ></script> <script src="/assets/js/isotope.pkgd.min.js"></script> <script src="/assets/js/site.js"></script>
